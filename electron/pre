// electron/preload.js
import { contextBridge, ipcRenderer } from 'electron';

contextBridge.exposeInMainWorld('electronAPI', {
  // Audio functions - Step 2
  playAudio: (audioPath) => ipcRenderer.invoke('play-audio', audioPath),
  
  // Vecchie funzioni (per Guest)
  getUsers: () => ipcRenderer.invoke('get-users'),
  
  // NUOVE funzioni di autenticazione
  authRegister: (name, email, password) => ipcRenderer.invoke('auth-register', name, email, password),
  authLogin: (email, password) => ipcRenderer.invoke('auth-login', email, password),
  
  // Funzioni per lettere e progressi
  getLetters: (userId) => ipcRenderer.invoke('get-letters', userId),
  markAsViewed: (letterId, userId) => ipcRenderer.invoke('mark-as-viewed', letterId, userId),
  
  // Funzione di rilevamento ambiente Electron
  isElectron: () => {
    // Verifica se siamo in ambiente Electron
    return typeof window !== 'undefined' && 
           window.process && 
           window.process.type === 'renderer';
  },
  
  // Funzione per verificare lo stato dell'ambiente Electron
  checkEnvironment: () => ipcRenderer.invoke('check-environment')
});
